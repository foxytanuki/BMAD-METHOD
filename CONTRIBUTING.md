# このプロジェクトへのコントリビューション

このプロジェクトへのコントリビューションをご検討いただき、ありがとうございます！このドキュメントでは、コントリビューションのプロセスと従うべきガイドラインについて説明します。

🆕 **GitHubやpull requestが初めてですか？** まず、初心者向けの[Pull Request Guide](docs/how-to-contribute-with-pull-requests.md)をご確認ください！

📋 **コントリビューションする前に**、BMad Methodのコア理念とアーキテクチャの決定を理解するため、[Guiding Principles](docs/GUIDING-PRINCIPLES.md)をお読みください。

また、GitHubのdiscussions機能を使用して、潜在的なアイデア、用途、追加機能、改良について話し合うコミュニティがあることにもご注意ください。

💬 **Discord Community**: リアルタイムでの議論には、[Discord server](https://discord.gg/gk8jAdXWmj)にご参加ください：

- **#general-dev** - 技術的な議論、機能のアイデア、開発に関する質問
- **#bugs-issues** - バグレポートと課題の議論

## 行動規範

このプロジェクトに参加することで、私たちのCode of Conductを遵守することに同意したものとします。参加する前に必ずお読みください。

## PRを提出する前に

**重要**: すべてのPRは、マージされる前にバリデーションチェックに合格する必要があります。

### 必須チェック

PRを提出する前に、ローカルで以下のコマンドを実行してください：

```bash
# Run all validation checks
npm run pre-release

# Or run them individually:
npm run validate     # Validate agent/team configs
npm run format:check # Check code formatting
npm run lint        # Check for linting issues
```

### 問題の修正

チェックが失敗した場合は、以下のコマンドを使用して修正してください：

```bash
# Fix all issues automatically
npm run fix

# Or fix individually:
npm run format      # Fix formatting issues
npm run lint:fix    # Fix linting issues
```

### Git Hooksの設定（任意ですが推奨）

コミット前に問題をキャッチするには：

```bash
# Run this once after cloning
chmod +x tools/setup-hooks.sh
./tools/setup-hooks.sh
```

## コントリビューションの方法

### バグの報告

1. **既存のissuesをまず確認し**、重複を避けてください
2. **新しいissueを作成する際はバグレポートテンプレートを使用してください** - 以下の提供をガイドします：
   - 明確なバグの説明
   - 再現手順
   - 期待される動作と実際の動作
   - Model/IDE/BMadバージョンの詳細
   - 該当する場合はスクリーンショットやリンク
3. **迅速なサポートについてはDiscordでの議論を検討してください**（#bugs-issuesチャンネル）
4. **修正に取り組んでいる場合は明示してください** - 重複した努力を避けるため

### 機能の提案

1. **最初にDiscordで議論してください**（#general-devチャンネル） - 機能リクエストテンプレートでこれを行ったかどうか尋ねられます
2. **既存のissuesやdiscussionsを確認し**、重複を避けてください
3. **issueを作成する際は機能リクエストテンプレートを使用してください** - 以下をガイドします：
   - Discordでの議論の確認
   - 解決する問題の説明
   - あなたのソリューションの説明
   - 検討した代替案のリスト
4. **この機能がBMadコミュニティにどのような利益をもたらすかを具体的に述べてください**

### Pull Requestプロセス

⚠️ **作業を開始する前に：**

1. **バグの場合**: issueが存在するか確認してください（存在しない場合はバグテンプレートを使用して作成）
2. **機能の場合**: Discord（#general-dev）で議論し、かつ機能リクエストissueを作成したことを確認してください
3. **大きな変更の場合**: アライメントを議論するため、常に最初にissueを開いてください

小さな細分化されたコミットのみを提案してください！大きなまたは重要な場合は、discussionsタブで議論し、最初にissueを開いてください。整合性がない、または他の計画された変更から逸脱しているために、潜在的に非常に大きなPRが拒否されることで時間を無駄にしてほしくありません。コミュニケーションを取り、この素晴らしいコミュニティプロジェクトを構築・改善するために協力しましょう！

**重要**: すべてのコントリビューションは私たちの[Guiding Principles](docs/GUIDING-PRINCIPLES.md)と整合している必要があります。主要なポイント：

- dev agentsは軽量に保つ - コーディングのためのコンテキストが必要で、ドキュメントではない
- Web/planning agentsはより複雑なタスクを持ち、大きくても構わない
- すべては自然言語（markdown） - コアフレームワークにコードはない
- ドメイン固有の機能にはexpansion packsを使用

#### PRをどのブランチに提出するか？

**`next`ブランチに提出**（ほとんどのコントリビューション）：

- ✨ 新機能やagents
- 🎨 既存機能の改良
- 📚 ドキュメントの更新
- ♻️ コードのリファクタリング
- ⚡ パフォーマンスの改善
- 🧪 新しいテスト
- 🎁 新しいexpansion packs

**`main`ブランチに提出**（クリティカルなもののみ）：

- 🚨 基本機能を破壊する重要なバグ修正
- 🔒 セキュリティパッチ
- 📚 危険なほど間違ったドキュメントの修正
- 🐛 インストールや基本的な使用を妨げるバグ

**迷った場合は`next`に提出してください**。安定版に到達する前に、変更を徹底的にテストしたいと思います。

#### PRサイズのガイドライン

- **理想的なPRサイズ**: 200-400行のコード変更
- **最大PRサイズ**: 800行（生成されたファイルを除く）
- **PR当たり1つの機能/修正**: 各PRは単一のissueに対処するか、1つの機能を追加する必要があります
- **変更がより大きい場合**: 独立してレビューできる複数の小さなPRに分割してください
- **関連する変更**: 関連する変更であっても、独立した価値を提供する場合は別々のPRにする必要があります

#### 大きなPRの分割

変更が800行を超える場合、このチェックリストを使用して分割してください：

- [ ] リファクタリングと機能実装を分離できますか？
- [ ] 新しいAPI/インターフェースを1つのPRで導入し、実装を別のPRで行えますか？
- [ ] ファイルまたはモジュールごとに分割できますか？
- [ ] 共有ユーティリティを含むベースPRを最初に作成できますか？
- [ ] テストの追加を実装から分離できますか？
- [ ] 変更が関連していても、独立して価値を提供できますか？
- [ ] これらの変更は順序に関係なくマージできますか？

分割の例：

1. PR #1: ユーティリティ関数と型の追加（100行）
2. PR #2: ユーティリティを使用するために既存のコードをリファクタリング（200行）
3. PR #3: リファクタリングされたコードを使用した新機能の実装（300行）
4. PR #4: 包括的なテストの追加（200行）

**注意**: PR #1と#4は、独立した価値を提供し、お互いのマージ順序に依存しないため、同時に提出できます。

#### Pull Requestの手順

1. リポジトリをforkする
2. 新しいブランチを作成する（`git checkout -b feature/your-feature-name`）
3. 変更を行う
4. 品質を保証するためにテストやlintingを実行する
5. 私たちのコミットメッセージ規則に従って、明確で説明的なメッセージで変更をコミットする
6. ブランチにpushする（`git push origin feature/your-feature-name`）
7. mainブランチに対してPull Requestを開く

## Issueテンプレート

必要なすべての情報が提供されることを保証するためにGitHub issueテンプレートを使用しています：

- **Bug Reports**: 再現手順、環境の詳細、期待される動作の提供を自動的にガイドします
- **Feature Requests**: Discordでの議論の確認を求め、問題/ソリューションの説明を求めます

これらのテンプレートを使用することで、メンテナーがあなたのコントリビューションをより速く理解し、対処することができます。

## Pull Request説明のガイドライン

このテンプレートに従って、PR説明を短く要点を絞って記述してください：

### PR説明テンプレート

PR説明は簡潔で焦点を絞ったものにしてください。このテンプレートを使用してください：

```markdown
## What

[1-2 sentences describing WHAT changed]

## Why

[1-2 sentences explaining WHY this change is needed]
Fixes #[issue number] (if applicable)

## How

[2-3 bullets listing HOW you implemented it]

-
-
-

## Testing

[1-2 sentences on how you tested this]
```

**PR説明の最大長: 200語**（必要に応じてコード例は除く）

### 良いPR説明 vs 悪いPR説明

❌ **悪い例:**

> この革命的なPRは、最先端のソリューションを実装することにより、システムのアーキテクチャにパラダイムシフト的な改良を導入し、パフォーマンス指標を最適化し、革新的なアプローチを通じてステークホルダーに前例のない価値を提供する最先端の方法論を活用します...

✅ **良い例:**

> **What:** agentの依存関係解決のバリデーションを追加
> **Why:** agentsに循環依存がある場合にビルドが静かに失敗していた
> **How:**
>
> - dependency-resolver.jsに循環検出を追加
> - 依存関係チェーンを含む明確なエラーを投げる
>   **Testing:** 3つのagents間の循環依存でテスト

## コミットメッセージ規則

conventional commitsフォーマットを使用してください：

- `feat:` 新機能
- `fix:` バグ修正
- `docs:` ドキュメントのみ
- `refactor:` バグを修正せず、機能を追加しないコード変更
- `test:` 不足していたテストの追加
- `chore:` ビルドプロセスや補助ツールの変更

コミットメッセージは72文字未満にしてください。

### アトミックコミット

各コミットは1つの論理的な変更を表す必要があります：

- **やるべき:** コミット当たり1つのバグ修正
- **やるべき:** コミット当たり1つの機能追加
- **やってはいけない:** リファクタリングとバグ修正を混在させる
- **やってはいけない:** 無関係な変更を組み合わせる

## コードスタイル

- 既存のコードスタイルと規則に従ってください
- 複雑なロジックには明確なコメントを記述してください

## ライセンス

このプロジェクトにコントリビューションすることで、あなたのコントリビューションがMIT Licenseの下でライセンスされることに同意したものとします。
